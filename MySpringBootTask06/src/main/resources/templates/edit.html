<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Edit User</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
</head>
<body>

<div class="container">

<h1>Edit User</h1><hr>

  <div class="col-4">
<form th:action="@{/users/edit/{id}(id=${user.id})}" method="post"
      th:object="${user}" enctype="multipart/form-data">
  <input class="form-control" type="hidden" th:field="*{id}">
  <label class="form-label" for="name">姓名:</label>
  <input class="form-control" type="text" id="name" th:field="*{name}" required><br>
  <label class="form-label" for="age">年龄:</label>
  <input class="form-control" type="text" id="age" th:field="*{age}"><br>
  <label class="form-label" for="sex">性别:</label>
  <input class="form-control" type="text" id="sex" th:field="*{sex}"><br>
  <label class="form-label" for="photo">头像:</label>
  <input class="form-control" type="file" id="photo" th:field="*{photo}" required></input>
  <img class="img-thumbnail" id="preview" th:src="@{'/uploads/'+ *{photo}}" width="100" height="100"><br><br>
  <button class="btn btn-primary" type="submit">更新</button>
</form>
  </div>


  <br>
<a th:href="@{/users}">返回用户列表></a>




<script>
    document.getElementById('photo').addEventListener('change', function(event) {
        const file = event.target.files[0];
        const preview = document.getElementById('preview');
        if (file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                preview.src=e.target.result;
                preview.style.display = 'block';
            };
            reader.readAsDataURL(file);
        }else {
            preview.style.display = 'none';
        }
    });
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-/mhDoLbDldZc3qpsJHpLogda//BVZbgYuw6kof4u2FrCedxOtgRZDTHgHUhOCVim" crossorigin="anonymous"></script>
</div>
</body>
</html>