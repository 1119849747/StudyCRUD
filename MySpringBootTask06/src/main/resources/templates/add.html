<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Add User</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
</head>
<body>
<div class="container">
<h1>Add User</h1><hr>

    <div class="col-4">
<form th:action="@{/users/add}" method="post"
      th:object="${user}" enctype="multipart/form-data">
    <label for="name" class="form-label">姓名:</label>
    <input class="form-control" type="text" id="name" th:field="*{name}"  required><br>
    <label for="age" class="form-label">年龄:</label>
    <input class="form-control" type="text" id="age" th:field="*{age}"><br>
    <label for="sex" class="form-label">性别:</label>
    <input class="form-control" type="text" id="sex" th:field="*{sex}"><br>
    <label for="photo" class="form-label">头像:</label>
    <input class="form-control" type="file" id="photo" name="photo" accept="image/*" >
    <img class="img-thumbnail" id="preview" src="#" alt="预览图片" style="display: none;"><br>
    <button class="btn btn-primary" type="submit">添加</button>
</form>
    </div>

    <br>
<a th:href="@{/users}">返回用户列表></a>

<script>
    document.getElementById('photo').addEventListener('change', function(event) {
        const file = event.target.files[0];
        const preview = document.getElementById('preview');
        if (file) {
            const reader = new FileReader();
            reader.onload = function(e) {
               preview.src=e.target.result;
               preview.style.display = 'block';
            };
            reader.readAsDataURL(file);
        }else {
            preview.style.display = 'none';
        }
    });
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-/mhDoLbDldZc3qpsJHpLogda//BVZbgYuw6kof4u2FrCedxOtgRZDTHgHUhOCVim" crossorigin="anonymous"></script>
</div>
</body>
</html>